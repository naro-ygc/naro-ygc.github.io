<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta name="referrer" content="no-referrer"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>onvif协议 | naro</title><meta name="author" content="naro-ygc,862450734@qq.com"><meta name="copyright" content="naro-ygc"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="IPC开发">
<meta property="og:type" content="article">
<meta property="og:title" content="onvif协议">
<meta property="og:url" content="https://naro-ygc.cn/posts/df20592e.html">
<meta property="og:site_name" content="naro">
<meta property="og:description" content="IPC开发">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://naro-ygc.cn/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E5%B0%81%E9%9D%A2.png">
<meta property="article:published_time" content="2025-02-21T19:27:28.687Z">
<meta property="article:modified_time" content="2023-09-30T16:37:47.000Z">
<meta property="article:author" content="naro-ygc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://naro-ygc.cn/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E5%B0%81%E9%9D%A2.png"><link rel="shortcut icon" href="/img/log.png"><link rel="canonical" href="https://naro-ygc.cn/posts/df20592e.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'onvif协议',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-01 00:37:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/log.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">76</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E5%B0%81%E9%9D%A2.png')"><nav id="nav"><span id="blog-info"><a href="/" title="naro"><span class="site-name">naro</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">onvif协议</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-21T19:27:28.687Z" title="发表于 2025-02-22 03:27:28">2025-02-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-30T16:37:47.000Z" title="更新于 2023-10-01 00:37:47">2023-10-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/">音视频协议</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="onvif协议"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><pre><code>probe为onvif连接时，会产生一个广播，一般情况下不影响整个协议。
WSDL的web服务公共接口。
之间的关系，onvif协议以soap协议为基础，
而soap又是用WSDL进行规范，所以onvif相当于
规范了WSDL。

理解上：onvif = 服务端 +客户端 =（web services + rtsp）+ 客户端 =（ （WSDL + soap）+
rtsp）+ 客户端
WSDL是服务端用来向客户描述自己实现那些请求，发送请求时需要带上那些参数xml格式
soap是客户端向服务器端发送请求时xml的参数格式。
web services是实现摄像头控制（比如一些参数配置、摄像头上下左右（PTZ）控制）；rtsp
实现摄像头传输，web services指ipc控制到具体的技术实现，进行技术交互，其实和http差不多，
客户端类似http post的格式向服务端发送请求，然后服务端响应客户端请求。

onvif中的profiles是什么？
onvif提供了很多的profiles概要文件，用来规范onvif设备端与onvif客户端的通信标准。目前已经发
布的profile文件主要包括S，G，C，Q，A，不同的profile文件应用于不同的领域，不同的profile文
件可以组合使用，profile文件的一致性是确保符合onvif产品兼容性的唯一方法，因此，只有符合
profile文件的注册产品才被认为是兼容onvif的。

profile S应用于网络视频系统，内容包括：
1、视频和音频流
2、PTZ控制和继电器输出
3、视频配置和多播
profile S应用于网络视频系统。profile S的设备（例如：网络摄像机或视频编码器）可以将视频数
据通过IP网络发送到profile S的客户端。profile S的客户端（例如：视频管理软件）可以配置、请
求和控制从profile S的设备上的IP网络视频流。

profile G应用于边缘存储与检索，内容包括：
1、配置、请求、控制录像
2、接收视频/音频流
profile G设备（例如：网络摄像机或视频编码器）可以通过网络存
储或本地存储录像。profile G客户端（例如：视频管理软件）可以配置、请求和控制profile G设备
上的录像

profile C应用网络电子门禁系统，内容包括：
1、站点信息和配置
2、事件和警报管理
3、门禁控制
profile C应用于电子门禁系统。profile C设备和客户应支持站点信息、门禁控制、事件和报警管理。

profile Q应用于快速安装，内容包括：
1、简单的设置
2、发现、配置和控制设备
3、先进的安全功能
profile Q应用于网络视频系统，其目的是提供profile Q产品的快速发现和配置（例如：网路摄像机、
网络交换机、网络监视器）。profile Q的客户端能够发现、配置和控制profile Q设备。peofile Q也
支持传输层安全协议（TLS），允许onvif设备与客户端以防止被篡改和窃听的安全方式进行通讯。

profile 	A应用于更广泛的访问控制配置，内容包括：
1、授予/撤销证书
2、创建时间表
3、指定访问规则
profie A应用于电子门禁系统。profile A的设备可以检索信息，状态和事件，并配置访问规则、
凭据和时间表等。profile A的客户端可以访问规则配置、凭据和时间表。profile A客户端还可
以检索和接收标准化的访问控制相关的事件。

profile T适用于高级视频流，内容包括：
1、H.264/H.265视频压缩
2、成像设置
3、动作报警和篡改事件
4、元数据流
5、双向音频

profile T专为基于IP的视频系统而设计。profile T支持视频流的功能，	例如使用H.264
和H.265编码格式，成像设置及诸运动和篡改检测之类的警报事件，设备的强制功能还
包括屏幕显示和元数据流，而客户端的强制功能还包括PTZ控制。profile T还覆盖了用于HTTOS流，
PTZ配置，运动区配置，数字输入和继电器输出的onvif规范，以及支持此类功能的符合设备和客
户端的双向音频。
</code></pre>
<h1 id="1、规范的内容"><a href="#1、规范的内容" class="headerlink" title="1、规范的内容"></a>1、规范的内容</h1><pre><code>1、DeviceMgmt（设备管理） 
2、DeviceIO（设备io服务）
3、Event（事件服务）
4、Analytics（视频分析）
5、AnalyticsDevice（分析设备）
6、Display（显示服务）
7、Imaging（图像配置）
8、Media（媒体配置）
9、PTZ（PTZ控制）
10、Receiver（接收端配置）
11、RemoteDiscovery（设备发现）
12、Recording（录像控制）
13、Replay（重新控制）
14、Search（记录搜索）
</code></pre>
<h2 id="1-1、怎么查找？"><a href="#1-1、怎么查找？" class="headerlink" title="1-1、怎么查找？"></a>1-1、怎么查找？</h2><pre><code>    需要了解那一部分的内容，只需要查找对应的接口文档，
例如移动侦测就去找event的文档。
文档已下载。
</code></pre>
<h1 id="2、web-service-wsdl-soap"><a href="#2、web-service-wsdl-soap" class="headerlink" title="2、web service + wsdl +soap"></a>2、web service + wsdl +soap</h1><h2 id="2-1、web-service"><a href="#2-1、web-service" class="headerlink" title="2-1、web service"></a>2-1、web service</h2><pre><code>web service主要使用HTTP和soap协议使数据在web上传输。
web service是基于xml和http的一种服务，其通讯协议主要基于soap。
服务端、客户端传递符合xml的soap消息实现服务的请求与回应。
客户端根据wsdl描述文档，会生成一个soap请求消息，该请求会被嵌入在
一个HTTP post请求中，发送到web services所在的web服务器，web services请求处理
器解析收到的soap请求，调用相应的web services。然后再生成相应的soap应答。
web服务器得到soap应答后，会再通过http应答的方式把信息送回客户端。
</code></pre>
<h2 id="2-2、wsdl"><a href="#2-2、wsdl" class="headerlink" title="2-2、wsdl"></a>2-2、wsdl</h2><pre><code>是一个用来描述Web服务和说明如何与Web服务通信的XML语言，为用户提供详细的接口说明书
</code></pre>
<h1 id="3、ONVIF-能力集"><a href="#3、ONVIF-能力集" class="headerlink" title="3、ONVIF 能力集"></a>3、ONVIF 能力集</h1><pre><code>    ONVIF设备管理标准分为如下子标准，
其中前5个是ONVIF设备必须实现的，后面2个是可选操作
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Capabilities			ONVIF设备能力集相关API</span><br><span class="line">Network					网络相关API</span><br><span class="line">System					系统配置相关API</span><br><span class="line">Security				安全相关API</span><br><span class="line">Input/Output(I/O)	</span><br><span class="line">Auxiliary operation	</span><br><span class="line">Storage Configuration</span><br></pre></td></tr></table></figure>
<h2 id="3-1、交集过程（示例）"><a href="#3-1、交集过程（示例）" class="headerlink" title="3-1、交集过程（示例）"></a>3-1、交集过程（示例）</h2><h3 id="3-1-1、Getcapabilities"><a href="#3-1-1、Getcapabilities" class="headerlink" title="3-1-1、Getcapabilities"></a>3-1-1、Getcapabilities</h3><pre><code>tds:Getcapabilities
客户端请求报文：
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </span><br><span class="line">&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot; </span><br><span class="line">xmlns:tds=&quot;http://www.onvif.org/ver10/device/wsdl&quot;&gt; </span><br><span class="line">	&lt;SOAP-ENV:Body&gt; </span><br><span class="line">		&lt;tds:GetCapabilities&gt; </span><br><span class="line">   			&lt;tds:Category&gt;All&lt;/tds:Category&gt; </span><br><span class="line">		&lt;/tds:GetCapabilities&gt; </span><br><span class="line">	&lt;/SOAP-ENV:Body&gt; </span><br><span class="line">&lt;/SOAP-ENV:Envelope&gt;</span><br></pre></td></tr></table></figure>
<pre><code>    服务器回复报文：
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </span><br><span class="line">&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot; </span><br><span class="line">xmlns:tt=&quot;http://www.onvif.org/ver10/schema&quot; </span><br><span class="line">xmlns:tds=&quot;http://www.onvif.org/ver10/device/wsdl&quot;&gt; </span><br><span class="line"> &lt;SOAP-ENV:Body&gt; </span><br><span class="line">  &lt;tds:GetCapabilitiesResponse&gt; </span><br><span class="line">	&lt;tds:Capabilities&gt; </span><br><span class="line">		&lt;tt:Device&gt; </span><br><span class="line">			&lt;tt:XAddr&gt;http://169.254.76.145/onvif/services&lt;/tt:XAddr&gt; </span><br><span class="line">			&lt;tt:Network&gt; </span><br><span class="line">				&lt;tt:IPFilter&gt;true&lt;/tt:IPFilter&gt; </span><br><span class="line">				&lt;tt:ZeroConfiguration&gt;true&lt;/tt:ZeroConfiguration&gt; </span><br><span class="line">				&lt;tt:IPVersion6&gt;true&lt;/tt:IPVersion6&gt; </span><br><span class="line">				&lt;tt:DynDNS&gt;true&lt;/tt:DynDNS&gt; </span><br><span class="line">			&lt;/tt:Network&gt; </span><br><span class="line">			&lt;tt:System&gt; </span><br><span class="line">				&lt;tt:DiscoveryResolve&gt;true&lt;/tt:DiscoveryResolve&gt; </span><br><span class="line">   				&lt;tt:DiscoveryBye&gt;true&lt;/tt:DiscoveryBye&gt; </span><br><span class="line">				&lt;tt:RemoteDiscovery&gt;false&lt;/tt:RemoteDiscovery&gt; </span><br><span class="line">				&lt;tt:SystemBackup&gt;false&lt;/tt:SystemBackup&gt; </span><br><span class="line">				&lt;tt:SystemLogging&gt;true&lt;/tt:SystemLogging&gt; </span><br><span class="line">				&lt;tt:FirmwareUpgrade&gt;false&lt;/tt:FirmwareUpgrade&gt; </span><br><span class="line">				&lt;tt:SupportedVersions&gt; </span><br><span class="line">					&lt;tt:Major&gt;1&lt;/tt:Major&gt; </span><br><span class="line">					&lt;tt:Minor&gt;0&lt;/tt:Minor&gt; </span><br><span class="line">				&lt;/tt:SupportedVersions&gt; </span><br><span class="line">			&lt;/tt:System&gt; </span><br><span class="line">			&lt;tt:IO&gt; </span><br><span class="line">				&lt;tt:InputConnectors&gt;1&lt;/tt:InputConnectors&gt; </span><br><span class="line">				&lt;tt:RelayOutputs&gt;0&lt;/tt:RelayOutputs&gt; </span><br><span class="line">			&lt;/tt:IO&gt; </span><br><span class="line">			&lt;tt:Security&gt; </span><br><span class="line">				&lt;tt:TLS1.1&gt;false&lt;/tt:TLS1.1&gt; </span><br><span class="line">				&lt;tt:TLS1.2&gt;false&lt;/tt:TLS1.2&gt; </span><br><span class="line">				&lt;tt:OnboardKeyGeneration&gt;false&lt;/tt:OnboardKeyGeneration&gt; </span><br><span class="line">				&lt;tt:AccessPolicyConfig&gt;false&lt;/tt:AccessPolicyConfig&gt; </span><br><span class="line">				&lt;tt:X.509Token&gt;false&lt;/tt:X.509Token&gt; </span><br><span class="line">				&lt;tt:SAMLToken&gt;false&lt;/tt:SAMLToken&gt; </span><br><span class="line">				&lt;tt:KerberosToken&gt;false&lt;/tt:KerberosToken&gt; </span><br><span class="line">				&lt;tt:RELToken&gt;false&lt;/tt:RELToken&gt; </span><br><span class="line">			&lt;/tt:Security&gt; </span><br><span class="line">		&lt;/tt:Device&gt; </span><br><span class="line">		&lt;tt:Events&gt; </span><br><span class="line">			&lt;tt:XAddr&gt;http://169.254.76.145/onvif/services&lt;/tt:XAddr&gt; </span><br><span class="line">			&lt;tt:WSSubscriptionPolicySupport&gt;false&lt;/tt:WSSubscriptionPolicySupport&gt; </span><br><span class="line">			&lt;tt:WSPullPointSupport&gt;false&lt;/tt:WSPullPointSupport&gt;</span><br><span class="line">			&lt;tt:WSPausableSubscriptionManagerInterfaceSupport&gt;false&lt;/tt:WSPausableSubscriptionManagerInterfaceSupport&gt; </span><br><span class="line">   		&lt;/tt:Events&gt;</span><br><span class="line">		&lt;tt:Media&gt; </span><br><span class="line">   			&lt;tt:XAddr&gt;http://169.254.76.145/onvif/services&lt;/tt:XAddr&gt; </span><br><span class="line">   			&lt;tt:StreamingCapabilities&gt; </span><br><span class="line">   				&lt;tt:RTPMulticast&gt;true&lt;/tt:RTPMulticast&gt; </span><br><span class="line">   				&lt;tt:RTP_TCP&gt;true&lt;/tt:RTP_TCP&gt; </span><br><span class="line">   				&lt;tt:RTP_RTSP_TCP&gt;true&lt;/tt:RTP_RTSP_TCP&gt; </span><br><span class="line">   			&lt;/tt:StreamingCapabilities&gt; </span><br><span class="line">		&lt;/tt:Media&gt; </span><br><span class="line">	&lt;/tds:Capabilities&gt; </span><br><span class="line">  &lt;/tds:GetCapabilitiesResponse&gt; </span><br><span class="line"> &lt;/SOAP-ENV:Body&gt; </span><br><span class="line">&lt;/SOAP-ENV:Envelope&gt;</span><br></pre></td></tr></table></figure>

<pre><code>宇视后端抓取得：
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">POST /onvif/device_service HTTP/1.1</span><br><span class="line">Host: 192.168.1.100:9007</span><br><span class="line">User-Agent: SOAP Client</span><br><span class="line">Content-Type: application/soap+xml; charset=utf-8</span><br><span class="line">Content-Length: 963</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;</span><br><span class="line">&lt;s:Envelope</span><br><span class="line">    xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot;</span><br><span class="line">    xmlns:sc=&quot;http://www.w3.org/2003/05/soap-encoding&quot;</span><br><span class="line">    xmlns:tt=&quot;http://www.onvif.org/ver10/schema&quot;</span><br><span class="line">    xmlns:wsnt=&quot;http://docs.oasis-open.org/wsn/b-2&quot;</span><br><span class="line">    xmlns:wsrf-bf=&quot;http://docs.oasis-open.org/wsrf/bf-2&quot;</span><br><span class="line">    xmlns:xop=&quot;http://www.w3.org/2004/08/xop/include&quot;</span><br><span class="line">    xmlns:tds=&quot;http://www.onvif.org/ver10/device/wsdl&quot;</span><br><span class="line">    xmlns:wsa5=&quot;http://www.w3.org/2005/08/addressing&quot;</span><br><span class="line">    xmlns:wstop=&quot;http://docs.oasis-open.org/wsn/t-1&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;</span><br><span class="line">    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;</span><br><span class="line">    xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">    xmlns:xmime=&quot;http://tempuri.org/xmime.xsd&quot;&gt;</span><br><span class="line">    &lt;s:Header/&gt;</span><br><span class="line">    &lt;s:Body&gt;</span><br><span class="line">        &lt;tds:GetCapabilities&gt;</span><br><span class="line">            &lt;tds:Category&gt;All&lt;/tds:Category&gt;</span><br><span class="line">        &lt;/tds:GetCapabilities&gt;</span><br><span class="line">    &lt;/s:Body&gt;</span><br><span class="line">&lt;/s:Envelope&gt;HTTP/1.1 200 OK</span><br><span class="line">Server: hsoap/2.8</span><br><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS</span><br><span class="line">Access-Control-Allow-Headers: Content-Type, Authorization, X-Custom-Header</span><br><span class="line">Content-Type: application/soap+xml; charset=utf-8</span><br><span class="line">Content-Length: 5491</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;s:Envelope</span><br><span class="line">    xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot;</span><br><span class="line">    xmlns:e=&quot;http://www.w3.org/2003/05/soap-encoding&quot;</span><br><span class="line">    xmlns:wsa=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;</span><br><span class="line">    xmlns:wsa5=&quot;http://www.w3.org/2005/08/addressing&quot;</span><br><span class="line">    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:wsaw=&quot;http://www.w3.org/2006/05/addressing/wsdl&quot;</span><br><span class="line">    xmlns:wsnt=&quot;http://docs.oasis-open.org/wsn/b-2&quot;</span><br><span class="line">    xmlns:wstop=&quot;http://docs.oasis-open.org/wsn/t-1&quot;</span><br><span class="line">    xmlns:wsntw=&quot;http://docs.oasis-open.org/wsn/bw-2&quot;</span><br><span class="line">    xmlns:wsrf-rw=&quot;http://docs.oasis-open.org/wsrf/rw-2&quot;</span><br><span class="line">    xmlns:wsrf-r=&quot;http://docs.oasis-open.org/wsrf/r-2&quot;</span><br><span class="line">    xmlns:wsrf-bf=&quot;http://docs.oasis-open.org/wsrf/bf-2&quot;</span><br><span class="line">    xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl&quot;</span><br><span class="line">    xmlns:wsoap12=&quot;http://schemas.xmlsoap.org/wsdl/soap12&quot;</span><br><span class="line">    xmlns:http=&quot;http://schemas.xmlsoap.org/wsdl/http&quot;</span><br><span class="line">    xmlns:d=&quot;http://schemas.xmlsoap.org/ws/2005/04/discovery&quot;</span><br><span class="line">    xmlns:wsadis=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;</span><br><span class="line">    xmlns:tt=&quot;http://www.onvif.org/ver10/schema&quot;</span><br><span class="line">    xmlns:tns1=&quot;http://www.onvif.org/ver10/topics&quot;</span><br><span class="line">    xmlns:tds=&quot;http://www.onvif.org/ver10/device/wsdl&quot;</span><br><span class="line">    xmlns:trt=&quot;http://www.onvif.org/ver10/media/wsdl&quot;</span><br><span class="line">    xmlns:tev=&quot;http://www.onvif.org/ver10/events/wsdl&quot;</span><br><span class="line">    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;</span><br><span class="line">    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;</span><br><span class="line">    xmlns:timg=&quot;http://www.onvif.org/ver20/imaging/wsdl&quot;</span><br><span class="line">    xmlns:tst=&quot;http://www.onvif.org/ver10/storage/wsdl&quot;</span><br><span class="line">    xmlns:dn=&quot;http://www.onvif.org/ver10/network/wsdl&quot;</span><br><span class="line">    xmlns:tr2=&quot;http://www.onvif.org/ver20/media/wsdl&quot;</span><br><span class="line">    xmlns:tptz=&quot;http://www.onvif.org/ver20/ptz/wsdl&quot;</span><br><span class="line">    xmlns:tan=&quot;http://www.onvif.org/ver20/analytics/wsdl&quot;</span><br><span class="line">    xmlns:axt=&quot;http://www.onvif.org/ver20/analytics&quot;</span><br><span class="line">    xmlns:tmd=&quot;http://www.onvif.org/ver10/deviceIO/wsdl&quot;</span><br><span class="line">    xmlns:tcr=&quot;http://www.onvif.org/ver10/credential/wsdl&quot;</span><br><span class="line">    xmlns:tar=&quot;http://www.onvif.org/ver10/accessrules/wsdl&quot;</span><br><span class="line">    xmlns:ewsd=&quot;http://www.onvifext.com/onvif/ext/ver10/wsdl&quot;</span><br><span class="line">    xmlns:exsd=&quot;http://www.onvifext.com/onvif/ext/ver10/schema&quot;</span><br><span class="line">    xmlns:tnshik=&quot;http://www.hikvision.com/2011/event/topics&quot;</span><br><span class="line">    xmlns:hikwsd=&quot;http://www.onvifext.com/onvif/ext/ver10/wsdl&quot;</span><br><span class="line">    xmlns:hikxsd=&quot;http://www.onvifext.com/onvif/ext/ver10/schema&quot;</span><br><span class="line">    xmlns:ter=&quot;http://www.onvif.org/ver10/error&quot;&gt;</span><br><span class="line">    &lt;s:Header&gt;&lt;/s:Header&gt;</span><br><span class="line">    &lt;s:Body&gt;</span><br><span class="line">        &lt;tds:GetCapabilitiesResponse&gt;</span><br><span class="line">            &lt;tds:Capabilities&gt;</span><br><span class="line">                &lt;tt:Analytics&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/Analytics&lt;/tt:XAddr&gt;</span><br><span class="line">                    &lt;tt:RuleSupport&gt;true&lt;/tt:RuleSupport&gt;</span><br><span class="line">                    &lt;tt:AnalyticsModuleSupport&gt;true&lt;/tt:AnalyticsModuleSupport&gt;</span><br><span class="line">                &lt;/tt:Analytics&gt;</span><br><span class="line">                &lt;tt:Device&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/device_service&lt;/tt:XAddr&gt;</span><br><span class="line">                    &lt;tt:Network&gt;</span><br><span class="line">                        &lt;tt:IPFilter&gt;false&lt;/tt:IPFilter&gt;</span><br><span class="line">                        &lt;tt:ZeroConfiguration&gt;false&lt;/tt:ZeroConfiguration&gt;</span><br><span class="line">                        &lt;tt:IPVersion6&gt;false&lt;/tt:IPVersion6&gt;</span><br><span class="line">                        &lt;tt:DynDNS&gt;false&lt;/tt:DynDNS&gt;</span><br><span class="line">                        &lt;tt:Extension&gt;</span><br><span class="line">                            &lt;tt:Dot11Configuration&gt;false&lt;/tt:Dot11Configuration&gt;</span><br><span class="line">                        &lt;/tt:Extension&gt;</span><br><span class="line">                    &lt;/tt:Network&gt;</span><br><span class="line">                    &lt;tt:System&gt;</span><br><span class="line">                        &lt;tt:DiscoveryResolve&gt;false&lt;/tt:DiscoveryResolve&gt;</span><br><span class="line">                        &lt;tt:DiscoveryBye&gt;false&lt;/tt:DiscoveryBye&gt;</span><br><span class="line">                        &lt;tt:RemoteDiscovery&gt;false&lt;/tt:RemoteDiscovery&gt;</span><br><span class="line">                        &lt;tt:SystemBackup&gt;false&lt;/tt:SystemBackup&gt;</span><br><span class="line">                        &lt;tt:SystemLogging&gt;false&lt;/tt:SystemLogging&gt;</span><br><span class="line">                        &lt;tt:FirmwareUpgrade&gt;false&lt;/tt:FirmwareUpgrade&gt;</span><br><span class="line">                        &lt;tt:SupportedVersions&gt;</span><br><span class="line">                            &lt;tt:Major&gt;17&lt;/tt:Major&gt;</span><br><span class="line">                            &lt;tt:Minor&gt;12&lt;/tt:Minor&gt;</span><br><span class="line">                        &lt;/tt:SupportedVersions&gt;</span><br><span class="line">                        &lt;tt:Extension&gt;</span><br><span class="line">                            &lt;tt:HttpFirmwareUpgrade&gt;false&lt;/tt:HttpFirmwareUpgrade&gt;</span><br><span class="line">                            &lt;tt:HttpSystemBackup&gt;false&lt;/tt:HttpSystemBackup&gt;</span><br><span class="line">                            &lt;tt:HttpSystemLogging&gt;false&lt;/tt:HttpSystemLogging&gt;</span><br><span class="line">                            &lt;tt:HttpSupportInformation&gt;false&lt;/tt:HttpSupportInformation&gt;</span><br><span class="line">                        &lt;/tt:Extension&gt;</span><br><span class="line">                    &lt;/tt:System&gt;</span><br><span class="line">                    &lt;tt:IO&gt;</span><br><span class="line">                        &lt;tt:InputConnectors&gt;0&lt;/tt:InputConnectors&gt;</span><br><span class="line">                        &lt;tt:RelayOutputs&gt;0&lt;/tt:RelayOutputs&gt;</span><br><span class="line">                    &lt;/tt:IO&gt;</span><br><span class="line">                    &lt;tt:Security&gt;</span><br><span class="line">                        &lt;tt:TLS1.1&gt;false&lt;/tt:TLS1.1&gt;</span><br><span class="line">                        &lt;tt:TLS1.2&gt;false&lt;/tt:TLS1.2&gt;</span><br><span class="line">                        &lt;tt:OnboardKeyGeneration&gt;false&lt;/tt:OnboardKeyGeneration&gt;</span><br><span class="line">                        &lt;tt:AccessPolicyConfig&gt;false&lt;/tt:AccessPolicyConfig&gt;</span><br><span class="line">                        &lt;tt:X.509Token&gt;false&lt;/tt:X.509Token&gt;</span><br><span class="line">                        &lt;tt:SAMLToken&gt;false&lt;/tt:SAMLToken&gt;</span><br><span class="line">                        &lt;tt:KerberosToken&gt;false&lt;/tt:KerberosToken&gt;</span><br><span class="line">                        &lt;tt:RELToken&gt;false&lt;/tt:RELToken&gt;</span><br><span class="line">                    &lt;/tt:Security&gt;</span><br><span class="line">                &lt;/tt:Device&gt;</span><br><span class="line">                &lt;tt:Events&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/events&lt;/tt:XAddr&gt;</span><br><span class="line">                    &lt;tt:WSSubscriptionPolicySupport&gt;true&lt;/tt:WSSubscriptionPolicySupport&gt;</span><br><span class="line">                    &lt;tt:WSPullPointSupport&gt;false&lt;/tt:WSPullPointSupport&gt;</span><br><span class="line">                    &lt;tt:WSPausableSubscriptionManagerInterfaceSupport&gt;false&lt;/tt:WSPausableSubscriptionManagerInterfaceSupport&gt;</span><br><span class="line">                &lt;/tt:Events&gt;</span><br><span class="line">                &lt;tt:Imaging&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/imaging&lt;/tt:XAddr&gt;</span><br><span class="line">                &lt;/tt:Imaging&gt;</span><br><span class="line">                &lt;tt:Media&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/media&lt;/tt:XAddr&gt;</span><br><span class="line">                    &lt;tt:StreamingCapabilities&gt;</span><br><span class="line">                        &lt;tt:RTPMulticast&gt;false&lt;/tt:RTPMulticast&gt;</span><br><span class="line">                        &lt;tt:RTP_TCP&gt;true&lt;/tt:RTP_TCP&gt;</span><br><span class="line">                        &lt;tt:RTP_RTSP_TCP&gt;true&lt;/tt:RTP_RTSP_TCP&gt;</span><br><span class="line">                    &lt;/tt:StreamingCapabilities&gt;</span><br><span class="line">                    &lt;tt:Extension&gt;</span><br><span class="line">                        &lt;tt:ProfileCapabilities&gt;</span><br><span class="line">                            &lt;tt:MaximumNumberOfProfiles&gt;2&lt;/tt:MaximumNumberOfProfiles&gt;</span><br><span class="line">                        &lt;/tt:ProfileCapabilities&gt;</span><br><span class="line">                    &lt;/tt:Extension&gt;</span><br><span class="line">                &lt;/tt:Media&gt;</span><br><span class="line">                &lt;tt:PTZ&gt;</span><br><span class="line">                    &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/ptz&lt;/tt:XAddr&gt;</span><br><span class="line">                &lt;/tt:PTZ&gt;</span><br><span class="line">                &lt;tt:Extension&gt;</span><br><span class="line">                    &lt;hikxsd:hikCapabilities&gt;</span><br><span class="line">                        &lt;hikxsd:XAddr&gt;http://192.168.1.100:9007/onvif/hik_ext&lt;/hikxsd:XAddr&gt;</span><br><span class="line">                        &lt;hikxsd:IOInputSupport&gt;false&lt;/hikxsd:IOInputSupport&gt;</span><br><span class="line">                        &lt;hikxsd:PrivacyMaskSupport&gt;true&lt;/hikxsd:PrivacyMaskSupport&gt;</span><br><span class="line">                        &lt;hikxsd:PTZ3DZoomSupport&gt;false&lt;/hikxsd:PTZ3DZoomSupport&gt;</span><br><span class="line">                        &lt;hikxsd:PTZPatternSupport&gt;true&lt;/hikxsd:PTZPatternSupport&gt;</span><br><span class="line">                    &lt;/hikxsd:hikCapabilities&gt;</span><br><span class="line">                    &lt;tt:DeviceIO&gt;</span><br><span class="line">                        &lt;tt:XAddr&gt;http://192.168.1.100:9007/onvif/deviceIO&lt;/tt:XAddr&gt;</span><br><span class="line">                        &lt;tt:VideoSources&gt;1&lt;/tt:VideoSources&gt;</span><br><span class="line">                        &lt;tt:VideoOutputs&gt;0&lt;/tt:VideoOutputs&gt;</span><br><span class="line">                        &lt;tt:AudioSources&gt;1&lt;/tt:AudioSources&gt;</span><br><span class="line">                        &lt;tt:AudioOutputs&gt;1&lt;/tt:AudioOutputs&gt;</span><br><span class="line">                        &lt;tt:RelayOutputs&gt;1&lt;/tt:RelayOutputs&gt;</span><br><span class="line">                    &lt;/tt:DeviceIO&gt;</span><br><span class="line">                &lt;/tt:Extension&gt;</span><br><span class="line">            &lt;/tds:Capabilities&gt;</span><br><span class="line">        &lt;/tds:GetCapabilitiesResponse&gt;</span><br><span class="line">    &lt;/s:Body&gt;</span><br><span class="line">&lt;/s:Envelope&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-1-2、tev-GetServiceCapabilities"><a href="#3-1-2、tev-GetServiceCapabilities" class="headerlink" title="3-1-2、tev:GetServiceCapabilities"></a>3-1-2、tev:GetServiceCapabilities</h3><p>客服端请求：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">客户端请求报文：</span><br><span class="line">POST /onvif/device_service HTTP/1.1</span><br><span class="line">Host: 192.16.11.180</span><br><span class="line">User-Agent: gSOAP/2.8</span><br><span class="line">Content-Type: application/soap+xml; charset=utf-8; action=&quot;http://www.onvif.org/ver10/events/wsdl/EventPortType/GetServiceCapabilitiesRequest&quot;</span><br><span class="line">Content-Length: 2589</span><br><span class="line">Connection: close</span><br><span class="line">SOAPAction: &quot;http://www.onvif.org/ver10/events/wsdl/EventPortType/GetServiceCapabilitiesRequest&quot;</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:SOAP-ENC=&quot;http://www.w3.org/2003/05/soap-encoding&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:wsa5=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:wsdd=&quot;http://schemas.xmlsoap.org/ws/2005/04/discovery&quot; xmlns:chan=&quot;http://schemas.microsoft.com/ws/2005/02/duplex&quot; xmlns:c14n=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; xmlns:saml1=&quot;urn:oasis:names:tc:SAML:1.0:assertion&quot; xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:xenc=&quot;http://www.w3.org/2001/04/xmlenc#&quot; xmlns:wsc=&quot;http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512&quot; xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:xmime=&quot;http://tempuri.org/xmime.xsd&quot; xmlns:xop=&quot;http://www.w3.org/2004/08/xop/include&quot; xmlns:wsnt=&quot;http://docs.oasis-open.org/wsn/b-2&quot; xmlns:tt=&quot;http://www.onvif.org/ver10/schema&quot; xmlns:tns1=&quot;http://www.onvif.org/ver10/topics&quot; xmlns:wsrfbf=&quot;http://docs.oasis-open.org/wsrf/bf-2&quot; xmlns:wstop=&quot;http://docs.oasis-open.org/wsn/t-1&quot; xmlns:wsrfr=&quot;http://docs.oasis-open.org/wsrf/r-2&quot; xmlns:dn=&quot;http://www.onvif.org/ver10/network/wsdl&quot; xmlns:tan=&quot;http://www.onvif.org/ver20/analytics/wsdl&quot; xmlns:tds=&quot;http://www.onvif.org/ver10/device/wsdl&quot; xmlns:tev=&quot;http://www.onvif.org/ver10/events/wsdl&quot; xmlns:timg=&quot;http://www.onvif.org/ver20/imaging/wsdl&quot; xmlns:tmd=&quot;http://www.onvif.org/ver10/deviceIO/wsdl&quot; xmlns:tptz=&quot;http://www.onvif.org/ver20/ptz/wsdl&quot; xmlns:tr2=&quot;http://www.onvif.org/ver20/media/wsdl&quot; xmlns:trc=&quot;http://www.onvif.org/ver10/recording/wsdl&quot; xmlns:trp=&quot;http://www.onvif.org/ver10/replay/wsdl&quot; xmlns:trt=&quot;http://www.onvif.org/ver10/media/wsdl&quot; xmlns:tse=&quot;http://www.onvif.org/ver10/search/wsdl&quot;&gt;</span><br><span class="line">&lt;SOAP-ENV:Header&gt;</span><br><span class="line">   &lt;wsa:MessageID&gt;urn:uuid:432d9097-6c1d-4a60-81d9-0b27d815ba6a&lt;/wsa:MessageID&gt;</span><br><span class="line">   &lt;wsa:ReplyTo SOAP-ENV:mustUnderstand=&quot;true&quot;&gt;</span><br><span class="line">   		&lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/wsa:Address&gt;</span><br><span class="line">   &lt;/wsa:ReplyTo&gt;</span><br><span class="line">   &lt;wsa:To SOAP-ENV:mustUnderstand=&quot;true&quot;&gt;</span><br><span class="line">   		http://172.16.11.180:80/onvif/device_service</span><br><span class="line">   &lt;/wsa:To&gt;</span><br><span class="line">   &lt;wsa:Action SOAP-ENV:mustUnderstand=&quot;true&quot;&gt;</span><br><span class="line">   		http://www.onvif.org/ver10/events/wsdl/EventPortType/GetServiceCapabilitiesRequest</span><br><span class="line">   &lt;/wsa:Action&gt;</span><br><span class="line">&lt;/SOAP-ENV:Header&gt;</span><br><span class="line">&lt;SOAP-ENV:Body&gt;</span><br><span class="line">   &lt;tev:GetServiceCapabilities&gt;&lt;/tev:GetServiceCapabilities&gt;</span><br><span class="line">&lt;/SOAP-ENV:Body&gt;</span><br><span class="line">&lt;/SOAP-ENV:Envelope&gt;</span><br></pre></td></tr></table></figure>


<pre><code>服务器回复报文：
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/soap+xml; charset=utf-8</span><br><span class="line">Content-Length: 827</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:SOAP-ENC=&quot;http://www.w3.org/2003/05/soap-encoding&quot; xmlns:tev=&quot;http://www.onvif.org/ver10/events/wsdl&quot; xmlns:wsa5=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;</span><br><span class="line">    &lt;SOAP-ENV:Header&gt;</span><br><span class="line">        &lt;wsa5:Action&gt;http://www.onvif.org/ver10/events/wsdl/EventPortType/GetServiceCapabilitiesResponse&lt;/wsa5:Action&gt;</span><br><span class="line">    &lt;/SOAP-ENV:Header&gt;</span><br><span class="line">    &lt;SOAP-ENV:Body&gt;</span><br><span class="line">        &lt;tev:GetServiceCapabilitiesResponse&gt;</span><br><span class="line">            &lt;tev:Capabilities </span><br><span class="line">            	WSSubscriptionPolicySupport=&quot;false&quot; </span><br><span class="line">            	WSPullPointSupport=&quot;true&quot; </span><br><span class="line">            	WSPausableSubscriptionManagerInterfaceSupport=&quot;false&quot; </span><br><span class="line">            	MaxNotificationProducers=&quot;0&quot; </span><br><span class="line">            	MaxPullPoints=&quot;10&quot; </span><br><span class="line">            	PersistentNotificationStorage=&quot;false&quot; /&gt;</span><br><span class="line">        &lt;/tev:GetServiceCapabilitiesResponse&gt;</span><br><span class="line">    &lt;/SOAP-ENV:Body&gt;</span><br><span class="line">&lt;/SOAP-ENV:Envelope&gt;</span><br></pre></td></tr></table></figure>
<pre><code>不重要，重要的是服务器请求。
</code></pre>
<h2 id="3-2、Capabilities-API"><a href="#3-2、Capabilities-API" class="headerlink" title="3-2、Capabilities API"></a>3-2、Capabilities API</h2><pre><code>一系列获取设备能力的API
GetServices #获取dev支持的服务，可附加服务能力集+设备能力集

GetServices -&gt; GetServiceCapabilities
-&gt; GetCapabilities
</code></pre>
<p>例子：如下报文描述了设备若干能力集，可<br>以包括tds作用域下的能力也包括其他作用域能力集<br><img src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/Capabilities.png"></p>
<h3 id="3-2-1、GetServiceCapabilities-获取网络服务能力集"><a href="#3-2-1、GetServiceCapabilities-获取网络服务能力集" class="headerlink" title="3-2-1、GetServiceCapabilities 获取网络服务能力集"></a>3-2-1、GetServiceCapabilities 获取网络服务能力集</h3><pre><code>注：必须实现，若实现GetServices
注：ONVIF网络服务能力集分类如下：
Capabilities	remark
NetworkCapabilities	网络能力
SecurityCapabilities	安全能力
SystemCapabilities	系统能力
MiscCapabilities	其他能力
</code></pre>
<h3 id="3-2-2、GetCapabilities-获取设备能力集"><a href="#3-2-2、GetCapabilities-获取设备能力集" class="headerlink" title="3-2-2、GetCapabilities #获取设备能力集"></a>3-2-2、GetCapabilities #获取设备能力集</h3><pre><code>注：必须实现，若实现GetServices
注：ONVIF能力分类如下：
Service	remark
Analytics	视频分析
Device	设备
Events	事件处理
Imaging	图像设置
Media	媒体设置
PTZ	摄像头云台控制
</code></pre>
<h2 id="3-3、-Network-API"><a href="#3-3、-Network-API" class="headerlink" title="3-3、 Network API"></a>3-3、 Network API</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">GetHostname #返回主机域名，注：域名可以是从DHCP获取的</span><br><span class="line"></span><br><span class="line">SetHostname #设置主机域名，注：主机域名可以从DHCP获取，若设备具有HostnameFromDHCP能力，此时只需要提交空的 Name 字段</span><br><span class="line"></span><br><span class="line">SetHostnameFromDHCP #设置设备是否从DHCP获取域名功能</span><br><span class="line">GetDNS #获取DNS设置，获取包括DHCP开关、搜索域（不明）、DHCP获取的DNS服务IP列表（要求DHCP开关必须开启）、手动DNS服务IP列表</span><br><span class="line"></span><br><span class="line">SetDNS #设置DNS，包括开启DHCP开关、设置搜索域、手动设置DNS服务。错误码（忽略常规错误码）：sender(指收到错误码的位请求发送方)-无效参数-IP地址无效（应该是指手动配置的DNS服务IP无效）</span><br><span class="line">GetNTP #获取NTP(网络时间协议) 配置，获取包括NTP服务IP的DHCP开关、DHCP NTP IP列表、手动NTP IP列表</span><br><span class="line"></span><br><span class="line">SetNTP #配置NTP，包括DHCP开关、手动NTP服务IP列表，错误码：sender-无效参数-设备的当前时间格式要求配置NTP服务</span><br><span class="line"></span><br><span class="line">GetDynamicDNS #获取动态DNS配置（要求Dev支持DynDNS能力），包括更新规则、DNS名（当DNS主动更新）、DNS保活时间（当DNS主动更新，原理类似UDP P2P保活）</span><br><span class="line"></span><br><span class="line">SetDynamicDNS #设置上述属性，要求设备支持 [RFC 2136] and [RFC 4702]标准，即DynDNS能力</span><br><span class="line"></span><br><span class="line">GetNetworkInterfaces #获取API属性（比如API是否启用、连接设置、MTU分包策略、IPv4/IPv6设置）列表，参考：tt:NetworkInterfaceInfo</span><br><span class="line"></span><br><span class="line">SetNetworkInterfaces #配置设备支持的API属性，配置成功后，如果返回属性RebootNeeded为true,则表明配置需要重启设备后生效（比如IP地址），这时候需要向设备发送SystemReboot请求；若属性为false,则表明配置立即生效。</span><br><span class="line"></span><br><span class="line">GetNetworkProtocols #获取应用层网络协议（ONVIF18.12支持HTTP\HTTPS\RTP）</span><br><span class="line"></span><br><span class="line">SetNetworkProtocols #配置应用层协议，与上述协议成对</span><br><span class="line"></span><br><span class="line">GetNetworkDefaultGateway #返回手动配置的默认网关IP</span><br><span class="line"></span><br><span class="line">SetNetworkDefaultGateway #设置默认网关</span><br><span class="line"></span><br><span class="line">GetZeroConfiguration  #从设备获取zero-configuration（设备自动配置）相关参数，设备如果支持RFC3927标准，请求返回 IPv4 zero configuration address 和 status（应该指 InterfaceToken 字段）</span><br><span class="line"></span><br><span class="line">SetZeroConfiguration #配置设备zero-configuration相关参数，要求设备支持RFC3927标准，且支持ZeroConfiguration 能力</span><br><span class="line"></span><br><span class="line">GetIPAddressFilter #获取设备IP过滤规则（要求设置支持 IPFilter 能力）</span><br><span class="line"></span><br><span class="line">AddIPAddressFilter #增加设备IP过滤规则，禁止那些IP访问、允许那些IP访问</span><br><span class="line"></span><br><span class="line">RemoveIPAddressFilter #删除设备IP过滤规则IEEE 802.11 configuration #IEEE 802.11系列配置项（要求设备支持IEEE 802.11标准（wifi）具有Dot11Configuration 能力）</span><br><span class="line">参考：[IEEE 802.11]简介:https://blog.csdn.net/f2157120/article/details/80831211</span><br><span class="line">ONVIF要求能够对设备进行如下配置：（具体方式ONVIF不做限制）</span><br><span class="line">    SSID</span><br><span class="line">    Station mode</span><br><span class="line">    Multiple wireless network configuration</span><br><span class="line">    Security configuration</span><br><span class="line"></span><br><span class="line">GetDot11Capabilities #获取设备支持的Dot11能力，IEEE 802.11定义了TKIP、ScanAvailableNetworks 、MultipleConfiguration 、AdHocStationMode 、WEP 5种能力</span><br><span class="line"></span><br><span class="line">GetDot11Status #获取无线网状态</span><br><span class="line"></span><br><span class="line">ScanAvailableDot11Networks #扫描可用Dot11局域网，就是手机wifi网络扫描功能</span><br></pre></td></tr></table></figure>
<h2 id="3-4、System-API"><a href="#3-4、System-API" class="headerlink" title="3-4、System API"></a>3-4、System API</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">GetDeviceInformation #获取设备的制造商、软件模型、固件版本、序列号、硬件id</span><br><span class="line"></span><br><span class="line">GetSystemUris  #获取从Dev提取日志、诊断信息、系统备份信息的url</span><br><span class="line"></span><br><span class="line">GetSystemBackup #从Dev获取系统备份（要求Dev具备SystemBackup能力，API已被弃用，替代API参考GetSystemUris 和 StartSystemRestore）系统备份可以用于回复设备的配置，注恢复设备的IP配置可能不同。系统备份文件的传输协议 为[MTOM]</span><br><span class="line"></span><br><span class="line">RestoreSystem #恢复系统备份（要求Dev具备SystemBackup能力，API已被弃用，替代API参考GetSystemUris 和 StartSystemRestore）系统备份文件的传输协议 为[MTOM]</span><br><span class="line"></span><br><span class="line">StartSystemRestore #恢复系统备份，Dev返回上传备份数据的URL及上传有效时间（避免客户端恶意占用上传网络资源）上传并恢复备份步骤</span><br><span class="line"></span><br><span class="line">GetSystemDateAndTime  #获取系统时间，会表明时间来自手动设置或NTP（此时要求SetNTP、GetNTP有效）、夏至时开关、时区、UTC时间、Dev本地时间。注：虽然UTC时间格式为可选但是为了向后兼容，设备shall提供UTC时间。</span><br><span class="line"></span><br><span class="line">SetSystemDateAndTime  #设置系统时间，GetSystemDateAndTime成对</span><br><span class="line"></span><br><span class="line">SetSystemFactoryDefault #恢复出厂设置，设备必须支持软、硬件初上设置。注：ONVIF对软件出厂设置未做定义，要是要求设备软出厂恢复后之前的IP仍能可达。这表明软出厂恢复时要求网络设置：IP地址、子网及网关设置、DHCP设置被保持。防止操作后设备丢失！</span><br><span class="line"></span><br><span class="line">UpgradeSystemFirmware  #固件升级（API已遗弃），升级包通过MTOM协议传输，同样要求网络设置：IP地址、子网及网关设置、DHCP设置被保持</span><br><span class="line"></span><br><span class="line">StartFirmwareUpgrade #固件升级，具体的固件数据格式ONVIF不做定义，若上传的固件数据无效，Dev返回Http状态码&quot;415 Unsupported Media Type&quot;，若升级失败适应为Dev故障则返回Http状态码&quot;500 Internal Server Error&quot;。POST数据时，Content-Type字段要求&quot;application/octet stream&quot;。同样要求升级后网络配置不变。上传文件及升级操作步骤</span><br><span class="line"></span><br><span class="line">GetSystemLog #获取日志（可选系统日志、客户端访问日志），传输遵守[MTOM]，具体日志格式ONVIF不做规定。获取日志的url从GetSystemUris 取得</span><br><span class="line"></span><br><span class="line">GetSystemSupportInformation  #获取系统诊断信息，设备可选传回二进制数据或文本数据，传输遵守[MTOM]，具体日志格式ONVIF不做规定。获取日志的url从GetSystemUris 取得</span><br><span class="line"></span><br><span class="line">SystemReboot  #设备重启</span><br><span class="line"></span><br><span class="line">GetScopes  #获取scope相关参数（scope用于匹配设备发现probe message），返回固定scope和可配置scope</span><br><span class="line"></span><br><span class="line">SetScopes  #重置可配scope，注：会覆盖现有的所有可配scope!，支持多个scope,用列表下标作为索引号</span><br><span class="line"></span><br><span class="line">AddScopes #为已有可配scope增加scope url参数，用列表下标作为scope索引</span><br><span class="line"></span><br><span class="line">RemoveScopes #为已有可配scope删除scope url参数，用列表下标作为scope索引</span><br><span class="line"></span><br><span class="line">GetDiscoveryMode #获取设备发现模式(可发现、不可发现)</span><br><span class="line"></span><br><span class="line">SetDiscoveryMode  #设置设备发现模式</span><br><span class="line"></span><br><span class="line">GetGeoLocation  #获取地理信息，（要求设备支持 GeoLocationEntities 能力，若设备支持AutoGeo能力AutoGeo条目有效）地理信息条目包括（设备不一定要支持全部地理信息条目）</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">SetGeoLocation #改变地理信息条目配置，成功设置后，会影响GetGeoLocation 返回信息</span><br><span class="line"></span><br><span class="line">DeleteGeoLocation #删除地理信息条目，删除后GetGeoLocation 不再显示</span><br></pre></td></tr></table></figure>
<h2 id="3-5、Security-API"><a href="#3-5、Security-API" class="headerlink" title="3-5、Security API"></a>3-5、Security API</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GetAccessPolicy #获取设备访问规则（二进制数据），包括用户级别、服务访问权限信息，若设备支持 SetAccessPolicy ，则必须实现本API。</span><br><span class="line"></span><br><span class="line">SetAccessPolicy  #设置访问规则</span><br><span class="line"></span><br><span class="line">GetUsers  #获取用户信息列表（不包含证据或密码）</span><br><span class="line"></span><br><span class="line">CreateUsers #新建用户，需要输入用户名、密码、用户级别</span><br><span class="line"></span><br><span class="line">DeleteUsers  #删除用户，根据用户名</span><br><span class="line"></span><br><span class="line">SetUser #改变用户设置，（用户名不能变，密码、级别可以变），重置密码时如果密码太简单设备返回ter:PasswordTooWeak错误码</span><br><span class="line"></span><br><span class="line">GetRemoteUser #获取远程用户(远程用户是什么用户？和普通用户有什么区别？)列表，（要求设备支持RemoteUserHandling 能力）</span><br><span class="line"></span><br><span class="line">SetRemoteUser #设置远程用户（The user is only valid for the WS-UserToken profile or as a HTTP / RTSP user）</span><br><span class="line"></span><br><span class="line">GetEndpointReference #获取设备服务端引用属性（服务的GUID），从文档中描述看，这个GUID可以用于计算远程用户操作的密码。</span><br></pre></td></tr></table></figure>
<h2 id="3-6、I-O-API"><a href="#3-6、I-O-API" class="headerlink" title="3-6、I&#x2F;O API"></a>3-6、I&#x2F;O API</h2><pre><code>    本节I/O相关的接口，主要用于保证后端兼容性。
控制、获取IO端口的状态。
更广泛的IO接口参考ONVIF Device IO Specification。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GetRelayOutputs #获取可用relay(什么是relay输出?可能是类似NVR通道的概念)输出列表</span><br><span class="line">SetRelayOutputSettings  #设置relay输出</span><br></pre></td></tr></table></figure>
<pre><code>好烦，不懂。
</code></pre>
<h2 id="3-7、辅助外设"><a href="#3-7、辅助外设" class="headerlink" title="3-7、辅助外设"></a>3-7、辅助外设</h2><pre><code>SendAuxiliaryCommand #发送设备辅助外设控制指令，比如控制红外线照明灯、
加热器、雨刮器、温度计等

请求报文类型tt:AuxiliaryData实际是一个xsd字符串，
onvif不规定指令的风格，但必须复合格式&quot;tt:command|parameter&quot;，如：
</code></pre>
<p><img src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E8%BE%85%E5%8A%A9%E5%A4%96%E8%AE%BE.png"></p>
<h2 id="3-8、存储配置"><a href="#3-8、存储配置" class="headerlink" title="3-8、存储配置"></a>3-8、存储配置</h2><p>以下接口允许客户端对设备数据存储进行设置，<br>可以参考 DAS, NAS, 和CDMI Server的存储配置。<br>要求设备具有Storage Configuration能力。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GetStorageConfigurations #获取所有存储配置项（不太明白这个存储配置指什么？）</span><br><span class="line">应该是客户端去获取服务端的设置状态</span><br><span class="line"></span><br><span class="line">CreateStorageConfiguration #新建存储配置</span><br><span class="line"></span><br><span class="line">GetStorageConfiguration #通过tt:ReferenceTokentt:ReferenceToken获取存储配置</span><br><span class="line"></span><br><span class="line">SetStorageConfiguration #重置已有的配置</span><br><span class="line"></span><br><span class="line">DeleteStorageConfiguration #删除配置</span><br></pre></td></tr></table></figure>
<h2 id="3-9、设备监控事件"><a href="#3-9、设备监控事件" class="headerlink" title="3-9、设备监控事件"></a>3-9、设备监控事件</h2><pre><code>设备主动上报运行状态的事件
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">tns1:Monitoring/ProcessorUsage // 上报设备处理器实时信息，Source应该是用来描述Data是什么</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/LinkStatus //上报设备的连接状态</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/UploadStatus // 当设备正在升级固件或系统时，上报升级状态，进度 注：设备上报时时间格式复合UTC的格林尼治标准</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/DefinedLimitReached // 到达操作时限时上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/MeanTimeBetweenFailuresDefaultLimitReached //MTBF（平均故障间隔时间）时限时上报，设备故障状态，用于计算设备无故障运行时间</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/MeanTimeBetweenFailuresOperationLimitReached //MTBF 操作时限时上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/LastReset //恢复出厂前上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/LastReboot //reboot前上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/OperatingTime/LastClockSynchronization //时钟同步后上报，由 NTP message或SetSystemDateAndTime call引发</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/Maintenance/Last //设备上报最后保持激活状态的时间（设备之后应该是休眠）</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/Maintenance/NextScheduled //上报下次激活的时间</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/Backup/Last //设备恢复备份后上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/AreaOfOperation/OutsideCertifiedArea //当设备被认证为不因为外界原因而松动时上报（没明白啥意思）</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/AreaOfOperation/OutsideConfiguredArea //当设备被配置为不因为外界原因而松动时上报</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/EnvironmentalConditions/RelativeHumidity //上报湿度信息，要求设备支持环境监测能力</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/EnvironmentalConditions/Temperature //上报温度信息，上报策略可以是6s/次或温差大于5%时，防止引发“事件洪水”</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/BatteryCapacity //上报剩余电池量,recommended to use a 2% change</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/AsynchronousOperationStatus //上报异步操作的进度。Token 字段用标识异步操作，区分同一类型一步操作的不同会话； OperationName 操作名； ServiceName 异步操作的服务名；OperationName 和ServiceName 可用于区别不同的异步操作； Progress  字段展示操作执行进度[0.0, 1.0]； Error 字段展示操作错误，错误码标准要求符合soapenv:Fault</span><br><span class="line"></span><br><span class="line">tns1:Device/OperationMode/ShutdownInitiated //关机前发送</span><br><span class="line"></span><br><span class="line">tns1:Device/OperationMode/UploadInitiated //升级开始前发送</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/Washer/LiquidLow //上报水箱液体等级</span><br><span class="line"></span><br><span class="line">tns1:Device/HardwareFailure/FanFailure //散热风扇故障</span><br><span class="line"></span><br><span class="line">tns1:Device/HardwareFailure/PowerSupplyFailure //供电故障</span><br><span class="line"></span><br><span class="line">tns1:Device/HardwareFailure/StorageFailure //存储设备故障</span><br><span class="line"></span><br><span class="line">tns1:Device/HardwareFailure/TemperatureCritical //设备温度过载报警</span><br><span class="line"></span><br><span class="line">tns1:Monitoring/GeoLocation //上报地理位置（针对便携式设备）</span><br></pre></td></tr></table></figure>

<h1 id="4、事件通知"><a href="#4、事件通知" class="headerlink" title="4、事件通知"></a>4、事件通知</h1><pre><code>&quot;设备事件&quot;是设备的主动活动或者检测到有事发生时产生，
当客户端定于某种类型的事件后，当事件产生时设备以某种形式推送消息给客户端。
事件的处理，在[WS-BaseNotification]和[WS-Topics] 规范基础上扩展

事件订阅/通知方式:10.1 Pull-Point Notification（拉模式通知）
</code></pre>
<h2 id="4-1、Pull-Point-Notification（拉模式通知）"><a href="#4-1、Pull-Point-Notification（拉模式通知）" class="headerlink" title="4-1、Pull-Point Notification（拉模式通知）"></a>4-1、Pull-Point Notification（拉模式通知）</h2><p><img src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E6%8B%89%E6%A8%A1%E5%BC%8F%E9%80%9A%E7%9F%A5.png"></p>
<pre><code>    从时序图可以看出，事件通知并不是设备主动上报而是需要客户端发送
PullMessages拉取。这种方式无需在客户端和设备间维护链路，
但要求客户端能够主动连接设备，当设备IP不固定的时候（比如Iot场景下），
拉模式通知往往需要在设备主动建立交互之后才能进行，
这导致这种场景下通知不够实时。

1、client通过CreatePullPointSubscriptionRequest向device申请
PullPointSubscription(拉订阅点)。这个request包含了此订阅的详细描述信息。
并且与the Basic Notification Interface不同之处就是此处需要省略consumerReference。

2、当subscribe被接受的时候device评估此订阅后返回
CreatePullPointSubscriptionResponse或者返回一个错误代码。

3、订阅被接受后，反馈的response需要包含SubscriptionManager的
WS-EndpointReference. WS-Endpoint必须提供PullMessage操作，
Pullmessage用于客户端检索通知信息，以及由订阅管理manager
接口去描述WS-BaseeNotification。Base Subscription Manager 接口包含PullMessage,
Renew,Unsubscribe 等操作。交互序列如上图。
PullMessage包含Timeout以及MessageLimit 参数。

4、一旦有来自client的查询通知则device必须立即响应，
如果没有则device一直保持等待client所订阅的通知到来或者等待超时发生。
一般情况下至少包括response，且通知个数是被指定的。
client在发出的一个PullMessagesRequest并收到PullMessagesResponse
后既可以实时轮询通知接口(类似于一问一答式的服务)。

5、如果在CreatePullPointSubscriptionRequest中未指定结束或者相关结束时间，
则每个PullMessagesRequest理解为保持激活状态等待相应的PullPointSubscription.
并且结束时间会根据相关联的结束时间或者装置内置数值进行再计算。
为了通知client去更新结束时PullMessageResponse必须包含CurrentTime以及terminalTime选项。
当PullMessagesRequest处于激活状态并等待相应的PullPointSubscription，
此时由WS-BaseNotification定义的RenewRequest不能被Client,
因此device需要支持PullPointSubscription。
（在没有订阅的前提下发送PullMessagesRequest,
需要等待PullPointSubscription去创建订阅完成才能继续运行）

6、如果device支持通知持续保存，则WS-Endpoint必须支持Seek操作，
其支持将pull指针重新拉回原位置。为防止将指针的放置位置超出了buffer的起始位置，
第一次调用PullMessage要从buffer的起始位置开始。
SeekRequest包含了UtcTime参数，UtcTime参数必须NotificationMessage中的属性相匹配。
当使用seek，则pull指针要放置在包含NotificationMessage的
且其UtcTime少于等于seek参数的buffer中。SeekRequest包含一个可选的对立参数，
这个参数可以将PullMessageResquest的pull方向反向。
</code></pre>
<p>接口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CreatePullPointSubscription //创建订阅，请求中可以指定要订阅的事件类型，订阅持续事件</span><br><span class="line"></span><br><span class="line">PullMessages //拉取事件</span><br><span class="line"></span><br><span class="line">Renew //要求设备支持MaxNotificationProducers能力，可能是重置订阅，具体用法不清楚</span><br><span class="line"></span><br><span class="line">Unsubscribe //取消所有订阅</span><br><span class="line"></span><br><span class="line">Seek //如果设备支持时间存储，则应该支持事件检索</span><br></pre></td></tr></table></figure>
<h2 id="4-2、Basic-Notification（WS-BaseNotification通知）"><a href="#4-2、Basic-Notification（WS-BaseNotification通知）" class="headerlink" title="4-2、Basic Notification（WS-BaseNotification通知）"></a>4-2、Basic Notification（WS-BaseNotification通知）</h2><p><img src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/WS-BaseNotification%E9%80%9A%E7%9F%A5.png"></p>
<pre><code>从时序图即可看出，这种消息通知方式，是设备主动的，
要求设备能够主动连接设备。或者TCP长连接，或者通过UDP链路保活，
或者client IP固定。

从时序图即可看出，这种消息通知方式，是设备主动的，
要求设备能够主动连接设备。或者TCP长连接，
或者通过UDP链路保活，或者client IP固定。
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://naro-ygc.cn">naro-ygc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://naro-ygc.cn/posts/df20592e.html">https://naro-ygc.cn/posts/df20592e.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://naro-ygc.cn" target="_blank">naro</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/onvif%E5%8D%8F%E8%AE%AE/%E5%B0%81%E9%9D%A2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/e33939ec.html" title="机器视觉、音视频开发"><img class="cover" src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/ipc%E5%BC%80%E5%8F%91/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">机器视觉、音视频开发</div></div></a></div><div class="next-post pull-right"><a href="/posts/d3ea8c5e.html" title="pcm音频格式详解"><img class="cover" src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/pcm%E8%AF%A6%E8%A7%A3/%E5%B0%81%E9%9D%A2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">pcm音频格式详解</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/log.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">naro-ygc</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">76</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E8%A7%84%E8%8C%83%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.</span> <span class="toc-text">1、规范的内容</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81%E6%80%8E%E4%B9%88%E6%9F%A5%E6%89%BE%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1-1、怎么查找？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81web-service-wsdl-soap"><span class="toc-number">2.</span> <span class="toc-text">2、web service + wsdl +soap</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81web-service"><span class="toc-number">2.1.</span> <span class="toc-text">2-1、web service</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81wsdl"><span class="toc-number">2.2.</span> <span class="toc-text">2-2、wsdl</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81ONVIF-%E8%83%BD%E5%8A%9B%E9%9B%86"><span class="toc-number">3.</span> <span class="toc-text">3、ONVIF 能力集</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E3%80%81%E4%BA%A4%E9%9B%86%E8%BF%87%E7%A8%8B%EF%BC%88%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">3-1、交集过程（示例）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1%E3%80%81Getcapabilities"><span class="toc-number">3.1.1.</span> <span class="toc-text">3-1-1、Getcapabilities</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2%E3%80%81tev-GetServiceCapabilities"><span class="toc-number">3.1.2.</span> <span class="toc-text">3-1-2、tev:GetServiceCapabilities</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E3%80%81Capabilities-API"><span class="toc-number">3.2.</span> <span class="toc-text">3-2、Capabilities API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1%E3%80%81GetServiceCapabilities-%E8%8E%B7%E5%8F%96%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E8%83%BD%E5%8A%9B%E9%9B%86"><span class="toc-number">3.2.1.</span> <span class="toc-text">3-2-1、GetServiceCapabilities 获取网络服务能力集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2%E3%80%81GetCapabilities-%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E8%83%BD%E5%8A%9B%E9%9B%86"><span class="toc-number">3.2.2.</span> <span class="toc-text">3-2-2、GetCapabilities #获取设备能力集</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E3%80%81-Network-API"><span class="toc-number">3.3.</span> <span class="toc-text">3-3、 Network API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4%E3%80%81System-API"><span class="toc-number">3.4.</span> <span class="toc-text">3-4、System API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5%E3%80%81Security-API"><span class="toc-number">3.5.</span> <span class="toc-text">3-5、Security API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6%E3%80%81I-O-API"><span class="toc-number">3.6.</span> <span class="toc-text">3-6、I&#x2F;O API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7%E3%80%81%E8%BE%85%E5%8A%A9%E5%A4%96%E8%AE%BE"><span class="toc-number">3.7.</span> <span class="toc-text">3-7、辅助外设</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8%E3%80%81%E5%AD%98%E5%82%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.8.</span> <span class="toc-text">3-8、存储配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9%E3%80%81%E8%AE%BE%E5%A4%87%E7%9B%91%E6%8E%A7%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.9.</span> <span class="toc-text">3-9、设备监控事件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5"><span class="toc-number">4.</span> <span class="toc-text">4、事件通知</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E3%80%81Pull-Point-Notification%EF%BC%88%E6%8B%89%E6%A8%A1%E5%BC%8F%E9%80%9A%E7%9F%A5%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">4-1、Pull-Point Notification（拉模式通知）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E3%80%81Basic-Notification%EF%BC%88WS-BaseNotification%E9%80%9A%E7%9F%A5%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">4-2、Basic Notification（WS-BaseNotification通知）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c1179e11.html" title="rootfs移植"><img src="/img/3_%E9%A9%B1%E5%8A%A8%E3%80%81bootleader%E3%80%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/mx6ull/%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rootfs移植"/></a><div class="content"><a class="title" href="/posts/c1179e11.html" title="rootfs移植">rootfs移植</a><time datetime="2025-07-06T15:30:24.665Z" title="发表于 2025-07-06 23:30:24">2025-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f85e2006.html" title="程序是怎么跑起来的"><img src="/img/0_%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/%E7%A8%8B%E5%BA%8F%E6%98%AF%E6%80%8E%E4%B9%88%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="程序是怎么跑起来的"/></a><div class="content"><a class="title" href="/posts/f85e2006.html" title="程序是怎么跑起来的">程序是怎么跑起来的</a><time datetime="2025-07-03T16:47:58.050Z" title="发表于 2025-07-04 00:47:58">2025-07-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/0.html" title="无题">无题</a><time datetime="2025-07-02T21:47:56.079Z" title="发表于 2025-07-03 05:47:56">2025-07-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f2e2a688.html" title="音视频原理入门"><img src="/img/5_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8D%8F%E8%AE%AE/ffmpeg/%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="音视频原理入门"/></a><div class="content"><a class="title" href="/posts/f2e2a688.html" title="音视频原理入门">音视频原理入门</a><time datetime="2025-07-02T21:44:22.579Z" title="发表于 2025-07-03 05:44:22">2025-07-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/96a84f26.html" title="计算机是怎么跑起来的"><img src="/img/0_%E9%80%9A%E7%94%A8%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E4%B9%88%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机是怎么跑起来的"/></a><div class="content"><a class="title" href="/posts/96a84f26.html" title="计算机是怎么跑起来的">计算机是怎么跑起来的</a><time datetime="2025-07-02T17:42:15.661Z" title="发表于 2025-07-03 01:42:15">2025-07-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By naro-ygc</div><div class="footer_custom_text">未经本人同意不得作于其他用途</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/网络/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 网络 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/驱动、bootleader、文件系统/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 驱动、bootleader、文件系统 (22)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/Linux开发/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 Linux开发 (19)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/问题总结/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 问题总结 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/开发方法/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 开发方法 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/AI-深度学习/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 AI-深度学习 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://naro-ygc.cn/categories/音视频协议/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 音视频协议 (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://naro-ygc.cn/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>